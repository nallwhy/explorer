<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.29.0">
    <meta name="project" content="Explorer v0.4.0-dev">

    <title>Ten Minutes to Explorer — Explorer v0.4.0-dev</title>
    <link rel="stylesheet" href="dist/html-elixir-2YOS5DIE.css" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-X7YVL3G2.js"></script>
    <script src="dist/sidebar_items-E25FB650.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-XN2TSG4M.js"></script>


  </head>
  <body data-type="extras" class="page-livemd">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="Explorer.html">
        <img src="assets/logo.png" alt="Explorer" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="Explorer.html" class="sidebar-projectName" translate="no">
Explorer
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.4.0-dev
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/elixir-nx/explorer/blob/v0.4.0-dev/notebooks/exploring_explorer.livemd#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span>Ten Minutes to Explorer</span>
</h1>

  <div class="livebook-badge-container">
    <a href="#" class="livebook-badge">
      <img src="https://livebook.dev/badge/v1/blue.svg" alt="Run in Livebook" width="150" />
    </a>
  </div>

<h2 id="introduction" class="section-heading">
  <a href="#introduction" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">introduction</p>
  </a>
  Introduction
</h2>
<p>Explorer is a dataframe library for Elixir. A dataframe is a common data structure used in data analysis. It is a two-dimensional table composed of columns and rows similar to a SQL table or a spreadsheet.</p><p>Explorer's aim is to provide a simple and powerful API for manipulating dataframes. It takes influences mainly
 from the <a href="https://www.tidyverse.org"><code class="inline">tidyverse</code></a>, but if you've used other dataframe libraries like <code class="inline">pandas</code> you shouldn't have too much trouble working with Explorer.</p><p>This document is meant to give you a crash course in using Explorer. More in-depth documentation can be found in the relevant sections of the docs.</p><p>We strongly recommend you run this livebook locally so you can see the outputs and play with the inputs!</p><h2 id="installation" class="section-heading">
  <a href="#installation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">installation</p>
  </a>
  Installation
</h2>
<p>Connect to a <a href="https://hexdocs.pm/mix/Mix.html"><code class="inline">Mix</code></a> project with <a href="Explorer.html"><code class="inline">Explorer</code></a> installed or:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Mix</span><span class="o">.</span><span class="n">install</span><span class="p" data-group-id="5812185767-1">(</span><span class="p" data-group-id="5812185767-2">[</span><span class="w">
  </span><span class="p" data-group-id="5812185767-3">{</span><span class="ss">:explorer</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.3.1&quot;</span><span class="p" data-group-id="5812185767-3">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="5812185767-4">{</span><span class="ss">:kino</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.4.1&quot;</span><span class="p" data-group-id="5812185767-4">}</span><span class="w">
</span><span class="p" data-group-id="5812185767-2">]</span><span class="p" data-group-id="5812185767-1">)</span></code></pre><h2 id="reading-and-writing-data" class="section-heading">
  <a href="#reading-and-writing-data" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">reading-and-writing-data</p>
  </a>
  Reading and writing data
</h2>
<p>Data can be read from delimited files (like CSV), NDJSON, Parquet, and the Arrow IPC (feather) format. You can also load in data from a map or keyword list of columns with <a href="Explorer.DataFrame.html#new/1"><code class="inline">Explorer.DataFrame.new/1</code></a>.</p><p>For CSV, your 'usual suspects' of options are available:</p><ul><li><code class="inline">delimiter</code> - A single character used to separate fields within a record. (default: <code class="inline">&quot;,&quot;</code>)</li><li><code class="inline">dtypes</code> - A keyword list of <code class="inline">[column_name: dtype]</code>. If a type is not specified for a column, it is imputed from the first 1000 rows. (default: <code class="inline">[]</code>)</li><li><code class="inline">header</code> - Does the file have a header of column names as the first row or not? (default: <code class="inline">true</code>)</li><li><code class="inline">max_rows</code> - Maximum number of lines to read. (default: <code class="inline">nil</code>)</li><li><code class="inline">null_character</code> - The string that should be interpreted as a nil value. (default: <code class="inline">&quot;NA&quot;</code>)</li><li><code class="inline">skip_rows</code> - The number of lines to skip at the beginning of the file. (default: <code class="inline">0</code>)</li><li><code class="inline">columns</code> - A list of column names to keep. If present, only these columns are read into the dataframe. (default: <code class="inline">nil</code>)</li></ul><p><a href="Explorer.html"><code class="inline">Explorer</code></a> also has multiple example datasets built in, which you can load from the <a href="Explorer.Datasets.html"><code class="inline">Explorer.Datasets</code></a> module like so:</p><pre><code class="makeup elixir" translate="no"><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Explorer.Datasets</span><span class="o">.</span><span class="n">fossil_fuels</span><span class="p" data-group-id="3229684793-1">(</span><span class="p" data-group-id="3229684793-1">)</span></code></pre><p>You'll notice that the output looks slightly different than many dataframe libraries. <a href="Explorer.html"><code class="inline">Explorer</code></a> takes inspiration on this front from <a href="https://pillar.r-lib.org/reference/glimpse.html"><code class="inline">glimpse</code></a> in R. A benefit to this approach is that you will rarely need to elide columns.</p><p>If you'd like to see a table with your data, we've got you covered there too.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Explorer.DataFrame</span><span class="o">.</span><span class="n">table</span><span class="p" data-group-id="5762316104-1">(</span><span class="n">df</span><span class="p" data-group-id="5762316104-1">)</span></code></pre><p>Writing files is very similar to reading them. The options are a little more limited:</p><ul><li><code class="inline">header</code> - Should the column names be written as the first line of the file? (default: <code class="inline">true</code>)</li><li><code class="inline">delimiter</code> - A single character used to separate fields within a record. (default: <code class="inline">&quot;,&quot;</code>)</li></ul><p>First, let's add some useful aliases:</p><pre><code class="makeup elixir" translate="no"><span class="kn">alias</span><span class="w"> </span><span class="nc">Explorer.DataFrame</span><span class="w">
</span><span class="kn">alias</span><span class="w"> </span><span class="nc">Explorer.Series</span></code></pre><p>And then write to a file of your choosing:</p><pre><code class="makeup elixir" translate="no"><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">text</span><span class="p" data-group-id="8650495100-1">(</span><span class="s">&quot;Filename&quot;</span><span class="p" data-group-id="8650495100-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="9143347040-1">(</span><span class="n">input</span><span class="p" data-group-id="9143347040-1">)</span><span class="w">
</span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">to_csv</span><span class="p" data-group-id="9143347040-2">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p" data-group-id="9143347040-2">)</span></code></pre><h2 id="working-with-series" class="section-heading">
  <a href="#working-with-series" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">working-with-series</p>
  </a>
  Working with Series
</h2>
<p><a href="Explorer.html"><code class="inline">Explorer</code></a>, like <code class="inline">Polars</code>, works up from the concept of a <code class="inline">Series</code>. In many ways, you can think of a dataframe as a row-aligned map of <code class="inline">Series</code>. These are like <code class="inline">vectors</code> in R or <code class="inline">series</code> in Pandas.</p><p>For simplicity, <a href="Explorer.html"><code class="inline">Explorer</code></a> uses the following <code class="inline">Series</code> <code class="inline">dtypes</code>:</p><ul><li><code class="inline">:float</code> - 64-bit floating point number</li><li><code class="inline">:integer</code> - 64-bit signed integer</li><li><code class="inline">:boolean</code> - Boolean</li><li><code class="inline">:string</code> - UTF-8 encoded binary</li><li><code class="inline">:date</code> - Date type that unwraps to <a href="https://hexdocs.pm/elixir/Date.html"><code class="inline">Elixir.Date</code></a></li><li><code class="inline">:datetime</code> - DateTime type that unwraps to <a href="https://hexdocs.pm/elixir/NaiveDateTime.html"><code class="inline">Elixir.NaiveDateTime</code></a></li></ul><p><code class="inline">Series</code> can be constructed from Elixir basic types. For example:</p><pre><code class="makeup elixir" translate="no"><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="1389400444-1">(</span><span class="p" data-group-id="1389400444-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="1389400444-2">]</span><span class="p" data-group-id="1389400444-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="5460777778-1">(</span><span class="p" data-group-id="5460777778-2">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p" data-group-id="5460777778-2">]</span><span class="p" data-group-id="5460777778-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="2068781233-1">(</span><span class="p" data-group-id="2068781233-2">[</span><span class="ld">~D[2011-01-01]</span><span class="p">,</span><span class="w"> </span><span class="ld">~D[1965-01-21]</span><span class="p" data-group-id="2068781233-2">]</span><span class="p" data-group-id="2068781233-1">)</span></code></pre><p>You'll notice that the <code class="inline">dtype</code> and size of the <code class="inline">Series</code> are at the top of the printed value. You can get those programmatically as well.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">dtype</span><span class="p" data-group-id="9985504139-1">(</span><span class="n">s3</span><span class="p" data-group-id="9985504139-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">size</span><span class="p" data-group-id="1771950042-1">(</span><span class="n">s3</span><span class="p" data-group-id="1771950042-1">)</span></code></pre><p>And the printed values max out at 50:</p><pre><code class="makeup elixir" translate="no"><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p" data-group-id="0836111287-1">(</span><span class="p" data-group-id="0836111287-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="0836111287-2">(</span><span class="p" data-group-id="0836111287-2">)</span></code></pre><p>Series are also nullable.</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="9811491019-1">(</span><span class="p" data-group-id="9811491019-2">[</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="mf">5.0</span><span class="p" data-group-id="9811491019-2">]</span><span class="p" data-group-id="9811491019-1">)</span></code></pre><p>And you can fill in those missing values using one of the following strategies:</p><ul><li><code class="inline">:forward</code> - replace nil with the previous value</li><li><code class="inline">:backward</code> - replace nil with the next value</li><li><code class="inline">:max</code> - replace nil with the series maximum</li><li><code class="inline">:min</code> - replace nil with the series minimum</li><li><code class="inline">:mean</code> - replace nil with the series mean</li></ul><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">fill_missing</span><span class="p" data-group-id="2232556211-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="ss">:forward</span><span class="p" data-group-id="2232556211-1">)</span></code></pre><p>In the case of mixed numeric types (i.e. integers and floats), <code class="inline">Series</code> will downcast to a float:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="2584079040-1">(</span><span class="p" data-group-id="2584079040-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p" data-group-id="2584079040-2">]</span><span class="p" data-group-id="2584079040-1">)</span></code></pre><p>In all other cases, <code class="inline">Series</code> must all be of the same <code class="inline">dtype</code> or else you'll get an <a href="https://hexdocs.pm/elixir/ArgumentError.html"><code class="inline">ArgumentError</code></a>.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="2774101531-1">(</span><span class="p" data-group-id="2774101531-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;a&quot;</span><span class="p" data-group-id="2774101531-2">]</span><span class="p" data-group-id="2774101531-1">)</span></code></pre><p>One of the goals of <a href="Explorer.html"><code class="inline">Explorer</code></a> is <em>useful error messages</em>. If you look at the error above, you get:</p><blockquote><p>Cannot make a series from mismatched types. Type of &quot;a&quot; does not match inferred dtype integer.</p></blockquote><p>Hopefully this makes abundantly clear what's going on.</p><p><code class="inline">Series</code> also implements the <a href="https://hexdocs.pm/elixir/Access.html"><code class="inline">Access</code></a> protocol. You can slice and dice in many ways:</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p" data-group-id="2304914601-1">(</span><span class="p" data-group-id="2304914601-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="2304914601-2">(</span><span class="p" data-group-id="2304914601-2">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="p" data-group-id="4002056270-1">[</span><span class="mi">1</span><span class="p" data-group-id="4002056270-1">]</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="p" data-group-id="5068383882-1">[</span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="5068383882-1">]</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="p" data-group-id="2298471079-1">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">4</span><span class="p" data-group-id="2298471079-1">]</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="p" data-group-id="4391496254-1">[</span><span class="p" data-group-id="4391496254-2">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="4391496254-2">]</span><span class="p" data-group-id="4391496254-1">]</span></code></pre><p>And of course, you can convert back to an Elixir list.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">to_list</span><span class="p" data-group-id="4076065464-1">(</span><span class="n">s</span><span class="p" data-group-id="4076065464-1">)</span></code></pre><p><a href="Explorer.html"><code class="inline">Explorer</code></a> supports comparisons.</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">11</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p" data-group-id="3732251680-1">(</span><span class="p" data-group-id="3732251680-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="3732251680-2">(</span><span class="p" data-group-id="3732251680-2">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="o">..</span><span class="mi">1</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p" data-group-id="2245185574-1">(</span><span class="p" data-group-id="2245185574-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="2245185574-2">(</span><span class="p" data-group-id="2245185574-2">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">equal</span><span class="p" data-group-id="7249254969-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p" data-group-id="7249254969-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">equal</span><span class="p" data-group-id="7320769081-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="7320769081-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">not_equal</span><span class="p" data-group-id="5776199274-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="5776199274-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">greater_equal</span><span class="p" data-group-id="3154452262-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="3154452262-1">)</span></code></pre><p>And arithmetic.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">add</span><span class="p" data-group-id="5960225911-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p" data-group-id="5960225911-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">subtract</span><span class="p" data-group-id="3974784323-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="3974784323-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">multiply</span><span class="p" data-group-id="0103471928-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p" data-group-id="0103471928-1">)</span></code></pre><p>Remember those helpful errors? We've tried to add those throughout. So if you try to do arithmetic with mismatching dtypes:</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="3261294162-1">(</span><span class="p" data-group-id="3261294162-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3261294162-2">]</span><span class="p" data-group-id="3261294162-1">)</span><span class="w">
</span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="3261294162-3">(</span><span class="p" data-group-id="3261294162-4">[</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p" data-group-id="3261294162-4">]</span><span class="p" data-group-id="3261294162-3">)</span><span class="w">
</span><span class="nc">Series</span><span class="o">.</span><span class="n">add</span><span class="p" data-group-id="3261294162-5">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p" data-group-id="3261294162-5">)</span></code></pre><p>Just kidding! Integers and floats will downcast to floats. Let's try again:</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="0789954632-1">(</span><span class="p" data-group-id="0789954632-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="0789954632-2">]</span><span class="p" data-group-id="0789954632-1">)</span><span class="w">
</span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="0789954632-3">(</span><span class="p" data-group-id="0789954632-4">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p" data-group-id="0789954632-4">]</span><span class="p" data-group-id="0789954632-3">)</span><span class="w">
</span><span class="nc">Series</span><span class="o">.</span><span class="n">add</span><span class="p" data-group-id="0789954632-5">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p" data-group-id="0789954632-5">)</span></code></pre><p>You can flip them around.</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="3763825004-1">(</span><span class="p" data-group-id="3763825004-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="3763825004-2">]</span><span class="p" data-group-id="3763825004-1">)</span><span class="w">
</span><span class="nc">Series</span><span class="o">.</span><span class="n">reverse</span><span class="p" data-group-id="3763825004-3">(</span><span class="n">s</span><span class="p" data-group-id="3763825004-3">)</span></code></pre><p>And sort.</p><pre><code class="makeup elixir" translate="no"><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p" data-group-id="2984648649-1">(</span><span class="p" data-group-id="2984648649-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">shuffle</span><span class="p" data-group-id="2984648649-2">(</span><span class="p" data-group-id="2984648649-2">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="2984648649-3">(</span><span class="p" data-group-id="2984648649-3">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="2984648649-4">(</span><span class="p" data-group-id="2984648649-4">)</span></code></pre><p>Or argsort.</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p" data-group-id="4757676984-1">(</span><span class="p" data-group-id="4757676984-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">shuffle</span><span class="p" data-group-id="4757676984-2">(</span><span class="p" data-group-id="4757676984-2">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="4757676984-3">(</span><span class="p" data-group-id="4757676984-3">)</span><span class="w">
</span><span class="n">ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">argsort</span><span class="p" data-group-id="4757676984-4">(</span><span class="n">s</span><span class="p" data-group-id="4757676984-4">)</span></code></pre><p>Which you can pass to <a href="Explorer.Series.html#slice/2"><code class="inline">Explorer.Series.slice/2</code></a> if you want the sorted values.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">slice</span><span class="p" data-group-id="4036475628-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">ids</span><span class="p" data-group-id="4036475628-1">)</span></code></pre><p>You can calculate cumulative values.</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p" data-group-id="3103084848-1">(</span><span class="p" data-group-id="3103084848-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="3103084848-2">(</span><span class="p" data-group-id="3103084848-2">)</span><span class="w">
</span><span class="nc">Series</span><span class="o">.</span><span class="n">cumulative_sum</span><span class="p" data-group-id="3103084848-3">(</span><span class="n">s</span><span class="p" data-group-id="3103084848-3">)</span></code></pre><p>Or rolling ones.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">window_sum</span><span class="p" data-group-id="8802539847-1">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="8802539847-1">)</span></code></pre><p>You can count and list unique values.</p><pre><code class="makeup elixir" translate="no"><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">from_list</span><span class="p" data-group-id="9042253255-1">(</span><span class="p" data-group-id="9042253255-2">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p" data-group-id="9042253255-2">]</span><span class="p" data-group-id="9042253255-1">)</span><span class="w">
</span><span class="nc">Series</span><span class="o">.</span><span class="n">distinct</span><span class="p" data-group-id="9042253255-3">(</span><span class="n">s</span><span class="p" data-group-id="9042253255-3">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">n_distinct</span><span class="p" data-group-id="1317046701-1">(</span><span class="n">s</span><span class="p" data-group-id="1317046701-1">)</span></code></pre><p>And you can even get a dataframe showing the counts for each distinct value.</p><pre><code class="makeup elixir" translate="no"><span class="nc">Series</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="5322435940-1">(</span><span class="n">s</span><span class="p" data-group-id="5322435940-1">)</span></code></pre><h2 id="working-with-dataframes" class="section-heading">
  <a href="#working-with-dataframes" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">working-with-dataframes</p>
  </a>
  Working with DataFrames
</h2>
<p>A <code class="inline">DataFrame</code> is really just a collection of <code class="inline">Series</code> of the same size. Which is why you can create a <code class="inline">DataFrame</code> from a <a href="https://hexdocs.pm/elixir/Keyword.html"><code class="inline">Keyword</code></a> list.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="9509826326-1">(</span><span class="ss">a</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9509826326-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="9509826326-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">b</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9509826326-3">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p" data-group-id="9509826326-3">]</span><span class="p" data-group-id="9509826326-1">)</span></code></pre><p>Similarly to <code class="inline">Series</code>, the <a href="https://hexdocs.pm/elixir/Inspect.html"><code class="inline">Inspect</code></a> implementation prints some info at the top and to the left. At the top we see the shape of the dataframe (rows and columns) and then for each column we see the name, dtype, and first five values. We can see a bit more from that built-in dataset we loaded in earlier.</p><pre><code class="makeup elixir" translate="no"><span class="n">df</span></code></pre><p>You will also see grouping information there, but we'll get to that later. You can get the info yourself directly:</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">names</span><span class="p" data-group-id="3999506299-1">(</span><span class="n">df</span><span class="p" data-group-id="3999506299-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">dtypes</span><span class="p" data-group-id="2129247259-1">(</span><span class="n">df</span><span class="p" data-group-id="2129247259-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">shape</span><span class="p" data-group-id="6759273155-1">(</span><span class="n">df</span><span class="p" data-group-id="6759273155-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="8478485818-1">{</span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">n_rows</span><span class="p" data-group-id="8478485818-2">(</span><span class="n">df</span><span class="p" data-group-id="8478485818-2">)</span><span class="p">,</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">n_columns</span><span class="p" data-group-id="8478485818-3">(</span><span class="n">df</span><span class="p" data-group-id="8478485818-3">)</span><span class="p" data-group-id="8478485818-1">}</span></code></pre><p>We can grab the head.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">head</span><span class="p" data-group-id="0569875635-1">(</span><span class="n">df</span><span class="p" data-group-id="0569875635-1">)</span></code></pre><p>Or the tail. Let's get a few more values from the tail.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">tail</span><span class="p" data-group-id="2998355474-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2998355474-1">)</span></code></pre><h3 id="select" class="section-heading">
  <a href="#select" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">select</p>
  </a>
  Select
</h3>
<p>Let's jump right into it. We can select columns pretty simply.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="1117047018-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1117047018-2">[</span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="1117047018-2">]</span><span class="p" data-group-id="1117047018-1">)</span></code></pre><p>But Elixir gives us some superpowers. In R there's <a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html"><code class="inline">tidy-select</code></a>. I don't think we need that in Elixir. Anywhere in <a href="Explorer.html"><code class="inline">Explorer</code></a> where you need to pass a list of column names, you can also execute a filtering callback on the column names. It's just an anonymous function passed to <code class="inline">df |&gt; DataFrame.names() |&gt; Enum.filter(callback_here)</code>.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="1137524966-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">String</span><span class="o">.</span><span class="n">ends_with?</span><span class="p" data-group-id="1137524966-2">(</span><span class="ni">&amp;1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fuel&quot;</span><span class="p" data-group-id="1137524966-2">)</span><span class="p" data-group-id="1137524966-1">)</span></code></pre><p>Want all but some columns? <code class="inline">DataFrame.select/3</code> takes <code class="inline">:keep</code> or <code class="inline">:drop</code> as the last arg. It just defaults to <code class="inline">:keep</code>.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="7867258038-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">String</span><span class="o">.</span><span class="n">ends_with?</span><span class="p" data-group-id="7867258038-2">(</span><span class="ni">&amp;1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fuel&quot;</span><span class="p" data-group-id="7867258038-2">)</span><span class="p">,</span><span class="w"> </span><span class="ss">:drop</span><span class="p" data-group-id="7867258038-1">)</span></code></pre><h3 id="filter" class="section-heading">
  <a href="#filter" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">filter</p>
  </a>
  Filter
</h3>
<p>The next verb we'll look at is <code class="inline">filter</code>. </p><p>You can use the <code class="inline">filter_with</code> function to pass anonymous functions:</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">filter_with</span><span class="p" data-group-id="4965961197-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Series</span><span class="o">.</span><span class="n">equal</span><span class="p" data-group-id="4965961197-2">(</span><span class="ni">&amp;1</span><span class="p" data-group-id="4965961197-3">[</span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="4965961197-3">]</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AFGHANISTAN&quot;</span><span class="p" data-group-id="4965961197-2">)</span><span class="p" data-group-id="4965961197-1">)</span></code></pre><p>Using complex filters is also possible:</p><pre><code class="makeup elixir" translate="no"><span class="n">filtered_df</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">filter_with</span><span class="p" data-group-id="4928087678-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="4928087678-2">fn</span><span class="w"> </span><span class="n">ldf</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">ldf</span><span class="p" data-group-id="4928087678-3">[</span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="4928087678-3">]</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">equal</span><span class="p" data-group-id="4928087678-4">(</span><span class="s">&quot;ALGERIA&quot;</span><span class="p" data-group-id="4928087678-4">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="ow">and</span><span class="p" data-group-id="4928087678-5">(</span><span class="nc">Series</span><span class="o">.</span><span class="n">greater</span><span class="p" data-group-id="4928087678-6">(</span><span class="n">ldf</span><span class="p" data-group-id="4928087678-7">[</span><span class="s">&quot;year&quot;</span><span class="p" data-group-id="4928087678-7">]</span><span class="p">,</span><span class="w"> </span><span class="mi">2012</span><span class="p" data-group-id="4928087678-6">)</span><span class="p" data-group-id="4928087678-5">)</span><span class="w">
  </span><span class="k" data-group-id="4928087678-2">end</span><span class="p" data-group-id="4928087678-1">)</span></code></pre><p>The code above is going to use a virtual representation of the data frame
that we call a &quot;lazy frame&quot;. With lazy frames you don't have access to the
series contents, but every operation will be optimized and run only once.</p><p>Remember those helpful error messages?</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">filter_with</span><span class="p" data-group-id="2120655258-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Series</span><span class="o">.</span><span class="n">equal</span><span class="p" data-group-id="2120655258-2">(</span><span class="ni">&amp;1</span><span class="p" data-group-id="2120655258-3">[</span><span class="s">&quot;cuontry&quot;</span><span class="p" data-group-id="2120655258-3">]</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AFGHANISTAN&quot;</span><span class="p" data-group-id="2120655258-2">)</span><span class="p" data-group-id="2120655258-1">)</span></code></pre><h3 id="mutate" class="section-heading">
  <a href="#mutate" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">mutate</p>
  </a>
  Mutate
</h3>
<p>A common task in data analysis is to add columns or change existing ones. Mutate is a handy verb.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">mutate_with</span><span class="p" data-group-id="0649248240-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="0649248240-2">[</span><span class="ss">new_column</span><span class="p">:</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">add</span><span class="p" data-group-id="0649248240-3">(</span><span class="ni">&amp;1</span><span class="p" data-group-id="0649248240-4">[</span><span class="s">&quot;solid_fuel&quot;</span><span class="p" data-group-id="0649248240-4">]</span><span class="p">,</span><span class="w"> </span><span class="ni">&amp;1</span><span class="p" data-group-id="0649248240-5">[</span><span class="s">&quot;cement&quot;</span><span class="p" data-group-id="0649248240-5">]</span><span class="p" data-group-id="0649248240-3">)</span><span class="p" data-group-id="0649248240-2">]</span><span class="p" data-group-id="0649248240-1">)</span></code></pre><p>Did you catch that? You can pass in new columns as keyword arguments. It also works to transform existing columns.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">mutate_with</span><span class="p" data-group-id="1268814306-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="1268814306-2">fn</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="p" data-group-id="1268814306-3">[</span><span class="w">
    </span><span class="ss">gas_fuel</span><span class="p">:</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">cast</span><span class="p" data-group-id="1268814306-4">(</span><span class="n">df</span><span class="p" data-group-id="1268814306-5">[</span><span class="s">&quot;gas_fuel&quot;</span><span class="p" data-group-id="1268814306-5">]</span><span class="p">,</span><span class="w"> </span><span class="ss">:float</span><span class="p" data-group-id="1268814306-4">)</span><span class="p">,</span><span class="w">
    </span><span class="ss">gas_and_liquid_fuel</span><span class="p">:</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">add</span><span class="p" data-group-id="1268814306-6">(</span><span class="n">df</span><span class="p" data-group-id="1268814306-7">[</span><span class="s">&quot;gas_fuel&quot;</span><span class="p" data-group-id="1268814306-7">]</span><span class="p">,</span><span class="w"> </span><span class="n">df</span><span class="p" data-group-id="1268814306-8">[</span><span class="s">&quot;liquid_fuel&quot;</span><span class="p" data-group-id="1268814306-8">]</span><span class="p" data-group-id="1268814306-6">)</span><span class="w">
  </span><span class="p" data-group-id="1268814306-3">]</span><span class="w">
</span><span class="k" data-group-id="1268814306-2">end</span><span class="p" data-group-id="1268814306-1">)</span></code></pre><p><code class="inline">DataFrame.mutate/2</code> is flexible though. You may not always want to use keyword arguments. Given that column names are <code class="inline">String.t()</code>, it may make more sense to use a map.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">mutate_with</span><span class="p" data-group-id="8464436127-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="8464436127-2">%{</span><span class="s">&quot;gas_fuel&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">subtract</span><span class="p" data-group-id="8464436127-3">(</span><span class="ni">&amp;1</span><span class="p" data-group-id="8464436127-4">[</span><span class="s">&quot;gas_fuel&quot;</span><span class="p" data-group-id="8464436127-4">]</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="8464436127-3">)</span><span class="p" data-group-id="8464436127-2">}</span><span class="p" data-group-id="8464436127-1">)</span></code></pre><p><code class="inline">DataFrame.transmute/2</code>, which is <code class="inline">DataFrame.mutate/2</code> that only retains the specified columns, is forthcoming.</p><h3 id="arrange" class="section-heading">
  <a href="#arrange" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">arrange</p>
  </a>
  Arrange
</h3>
<p>Sorting the dataframe is pretty straightforward.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">arrange</span><span class="p" data-group-id="4562705959-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;year&quot;</span><span class="p" data-group-id="4562705959-1">)</span></code></pre><p>But it comes with some tricks up its sleeve.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">arrange</span><span class="p" data-group-id="2263848528-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="ss">asc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;total&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">desc</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;year&quot;</span><span class="p" data-group-id="2263848528-1">)</span></code></pre><p>Sort operations happen left to right. And keyword list args permit specifying the direction.</p><h3 id="distinct" class="section-heading">
  <a href="#distinct" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">distinct</p>
  </a>
  Distinct
</h3>
<p>Okay, as expected here too. Very straightforward.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">distinct</span><span class="p" data-group-id="8004109490-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8004109490-2">[</span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="8004109490-2">]</span><span class="p" data-group-id="8004109490-1">)</span></code></pre><p>You can specify whether to keep the other columns as well.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">distinct</span><span class="p" data-group-id="7470700936-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7470700936-2">[</span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="7470700936-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">keep_all</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="7470700936-1">)</span></code></pre><h3 id="rename" class="section-heading">
  <a href="#rename" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">rename</p>
  </a>
  Rename
</h3>
<p>Rename can take either a list of new names or a callback that is passed to <a href="https://hexdocs.pm/elixir/Enum.html#map/2"><code class="inline">Enum.map/2</code></a> against the names. You can also use a map or keyword args to rename specific columns.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">rename</span><span class="p" data-group-id="4058238304-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="ss">year</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;year_test&quot;</span><span class="p" data-group-id="4058238304-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">rename_with</span><span class="p" data-group-id="7065980032-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="7065980032-2">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="s">&quot;_test&quot;</span><span class="p" data-group-id="7065980032-2">)</span><span class="p" data-group-id="7065980032-1">)</span></code></pre><h3 id="dummies" class="section-heading">
  <a href="#dummies" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">dummies</p>
  </a>
  Dummies
</h3>
<p>This is fun! We can get dummy variables for unique values.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">dummies</span><span class="p" data-group-id="3619506447-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3619506447-2">[</span><span class="s">&quot;year&quot;</span><span class="p" data-group-id="3619506447-2">]</span><span class="p" data-group-id="3619506447-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">dummies</span><span class="p" data-group-id="3361765837-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3361765837-2">[</span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="3361765837-2">]</span><span class="p" data-group-id="3361765837-1">)</span></code></pre><h3 id="sampling" class="section-heading">
  <a href="#sampling" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">sampling</p>
  </a>
  Sampling
</h3>
<p>Random samples can give us a percent or a specific number of samples, with or without replacement, and the function is seedable.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">sample</span><span class="p" data-group-id="7466996492-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="7466996492-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">sample</span><span class="p" data-group-id="4265801499-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p" data-group-id="4265801499-1">)</span></code></pre><p>Trying for those helpful error messages again.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">sample</span><span class="p" data-group-id="1717584367-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p" data-group-id="1717584367-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">sample</span><span class="p" data-group-id="4795339863-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="ss">replacement</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="4795339863-1">)</span></code></pre><h3 id="pull-and-slice" class="section-heading">
  <a href="#pull-and-slice" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">pull-and-slice</p>
  </a>
  Pull and slice
</h3>
<p>Slicing and dicing can be done with the <a href="https://hexdocs.pm/elixir/Access.html"><code class="inline">Access</code></a> protocol or with explicit pull/slice/take functions.</p><pre><code class="makeup elixir" translate="no"><span class="n">df</span><span class="p" data-group-id="4933213894-1">[</span><span class="s">&quot;year&quot;</span><span class="p" data-group-id="4933213894-1">]</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">pull</span><span class="p" data-group-id="7531702561-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;year&quot;</span><span class="p" data-group-id="7531702561-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">df</span><span class="p" data-group-id="9683746186-1">[</span><span class="p" data-group-id="9683746186-2">[</span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="9683746186-2">]</span><span class="p" data-group-id="9683746186-1">]</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">slice</span><span class="p" data-group-id="4035165225-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4035165225-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p" data-group-id="4035165225-2">]</span><span class="p" data-group-id="4035165225-1">)</span></code></pre><p>Negative offsets work for slice!</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">slice</span><span class="p" data-group-id="3322725288-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="3322725288-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">slice</span><span class="p" data-group-id="7471724428-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="7471724428-1">)</span></code></pre><p>Slice also works with ranges:</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">slice</span><span class="p" data-group-id="9000349173-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="o">..</span><span class="mi">42</span><span class="p" data-group-id="9000349173-1">)</span></code></pre><h3 id="pivot" class="section-heading">
  <a href="#pivot" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">pivot</p>
  </a>
  Pivot
</h3>
<p>We can <code class="inline">pivot_longer/3</code> and <code class="inline">pivot_wider/4</code>. These are inspired by <a href="https://tidyr.tidyverse.org/articles/pivot.html">tidyr</a>.</p><p>There are some shortcomings in <code class="inline">pivot_wider/4</code> related to <code class="inline">polars</code>. The <code class="inline">values_from</code> column must be a numeric type.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">pivot_longer</span><span class="p" data-group-id="8187784798-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8187784798-2">[</span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="8187784798-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">value_columns</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">String</span><span class="o">.</span><span class="n">ends_with?</span><span class="p" data-group-id="8187784798-3">(</span><span class="ni">&amp;1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fuel&quot;</span><span class="p" data-group-id="8187784798-3">)</span><span class="p" data-group-id="8187784798-1">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">pivot_wider</span><span class="p" data-group-id="2947056002-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;country&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;total&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">id_columns</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2947056002-2">[</span><span class="s">&quot;year&quot;</span><span class="p" data-group-id="2947056002-2">]</span><span class="p" data-group-id="2947056002-1">)</span></code></pre><p>Let's make those names look nicer!</p><pre><code class="makeup elixir" translate="no"><span class="n">tidy_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="3161055091-1">fn</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="n">name</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">downcase</span><span class="p" data-group-id="3161055091-2">(</span><span class="p" data-group-id="3161055091-2">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">replace</span><span class="p" data-group-id="3161055091-3">(</span><span class="sr">~r/</span><span class="se">\s</span><span class="sr">/</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p" data-group-id="3161055091-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">replace</span><span class="p" data-group-id="3161055091-4">(</span><span class="sr">~r/[^A-Za-z</span><span class="se">\s</span><span class="sr">]/</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p" data-group-id="3161055091-4">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">replace</span><span class="p" data-group-id="3161055091-5">(</span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;_&quot;</span><span class="p" data-group-id="3161055091-5">)</span><span class="w">
</span><span class="k" data-group-id="3161055091-1">end</span><span class="w">

</span><span class="n">df</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">pivot_wider</span><span class="p" data-group-id="3161055091-6">(</span><span class="s">&quot;country&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;total&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">id_columns</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3161055091-7">[</span><span class="s">&quot;year&quot;</span><span class="p" data-group-id="3161055091-7">]</span><span class="p" data-group-id="3161055091-6">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">rename_with</span><span class="p" data-group-id="3161055091-8">(</span><span class="n">tidy_names</span><span class="p" data-group-id="3161055091-8">)</span></code></pre><h3 id="joins" class="section-heading">
  <a href="#joins" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">joins</p>
  </a>
  Joins
</h3>
<p>Joining is <em>fast</em> and easy. You can specify the columns to join on and how to join. Polars even supports cartesian (cross) joins, so <a href="Explorer.html"><code class="inline">Explorer</code></a> does too.</p><pre><code class="makeup elixir" translate="no"><span class="n">df1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="5052746471-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5052746471-2">[</span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;country&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;total&quot;</span><span class="p" data-group-id="5052746471-2">]</span><span class="p" data-group-id="5052746471-1">)</span><span class="w">
</span><span class="n">df2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="5052746471-3">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5052746471-4">[</span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;country&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cement&quot;</span><span class="p" data-group-id="5052746471-4">]</span><span class="p" data-group-id="5052746471-3">)</span><span class="w">
</span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">join</span><span class="p" data-group-id="5052746471-5">(</span><span class="n">df1</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p" data-group-id="5052746471-5">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">df3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="0358270759-1">(</span><span class="p" data-group-id="0358270759-2">[</span><span class="s">&quot;year&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cement&quot;</span><span class="p" data-group-id="0358270759-2">]</span><span class="p" data-group-id="0358270759-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">slice</span><span class="p" data-group-id="0358270759-3">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p" data-group-id="0358270759-3">)</span><span class="w">
</span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">join</span><span class="p" data-group-id="0358270759-4">(</span><span class="n">df1</span><span class="p">,</span><span class="w"> </span><span class="n">df3</span><span class="p">,</span><span class="w"> </span><span class="ss">how</span><span class="p">:</span><span class="w"> </span><span class="ss">:left</span><span class="p" data-group-id="0358270759-4">)</span></code></pre><h3 id="grouping" class="section-heading">
  <a href="#grouping" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">grouping</p>
  </a>
  Grouping
</h3>
<p><a href="Explorer.html"><code class="inline">Explorer</code></a> supports groupby operations. They're limited based on what's possible in Polars, but they do most of what you need to do.</p><pre><code class="makeup elixir" translate="no"><span class="n">grouped</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">group_by</span><span class="p" data-group-id="2173393859-1">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2173393859-2">[</span><span class="s">&quot;country&quot;</span><span class="p" data-group-id="2173393859-2">]</span><span class="p" data-group-id="2173393859-1">)</span></code></pre><p>Notice that the <a href="https://hexdocs.pm/elixir/Inspect.html"><code class="inline">Inspect</code></a> call now shows <code class="inline">groups</code> as well as <code class="inline">rows</code> and <code class="inline">columns</code>. You can, of course, get them explicitly.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">groups</span><span class="p" data-group-id="3167825664-1">(</span><span class="n">grouped</span><span class="p" data-group-id="3167825664-1">)</span></code></pre><p>And you can ungroup explicitly.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">ungroup</span><span class="p" data-group-id="2146714380-1">(</span><span class="n">grouped</span><span class="p" data-group-id="2146714380-1">)</span></code></pre><p>But what we care about the most is aggregating! Let's see which country has the max <code class="inline">per_capita</code> value.</p><pre><code class="makeup elixir" translate="no"><span class="n">grouped</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">summarise</span><span class="p" data-group-id="0749879520-1">(</span><span class="ss">per_capita</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0749879520-2">[</span><span class="ss">:max</span><span class="p" data-group-id="0749879520-2">]</span><span class="p" data-group-id="0749879520-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">arrange</span><span class="p" data-group-id="0749879520-3">(</span><span class="ss">desc</span><span class="p">:</span><span class="w"> </span><span class="ss">:per_capita_max</span><span class="p" data-group-id="0749879520-3">)</span></code></pre><p>Qatar it is. You can use the following aggregations:</p><ul><li><code class="inline">:min</code> - Take the minimum value within the group. See <a href="Explorer.Series.html#min/1"><code class="inline">Explorer.Series.min/1</code></a>.</li><li><code class="inline">:max</code> - Take the maximum value within the group. See <a href="Explorer.Series.html#max/1"><code class="inline">Explorer.Series.max/1</code></a>.</li><li><code class="inline">:sum</code> - Take the sum of the series within the group. See <a href="Explorer.Series.html#sum/1"><code class="inline">Explorer.Series.sum/1</code></a>.</li><li><code class="inline">:mean</code> - Take the mean of the series within the group. See <a href="Explorer.Series.html#mean/1"><code class="inline">Explorer.Series.mean/1</code></a>.</li><li><code class="inline">:median</code> - Take the median of the series within the group. See <a href="Explorer.Series.html#median/1"><code class="inline">Explorer.Series.median/1</code></a>.</li><li><code class="inline">:first</code> - Take the first value within the group. See <a href="Explorer.Series.html#first/1"><code class="inline">Explorer.Series.first/1</code></a>.</li><li><code class="inline">:last</code> - Take the last value within the group. See <a href="Explorer.Series.html#last/1"><code class="inline">Explorer.Series.last/1</code></a>.</li><li><code class="inline">:count</code> - Count the number of rows per group.</li><li><code class="inline">:n_unique</code> - Count the number of unique rows per group.</li></ul><p>The API is similar to <code class="inline">mutate</code>: you can use keyword args or a map and specify aggregations to use.</p><pre><code class="makeup elixir" translate="no"><span class="n">grouped</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">summarise</span><span class="p" data-group-id="8143329597-1">(</span><span class="ss">per_capita</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8143329597-2">[</span><span class="ss">:max</span><span class="p">,</span><span class="w"> </span><span class="ss">:min</span><span class="p" data-group-id="8143329597-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">total</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8143329597-3">[</span><span class="ss">:min</span><span class="p" data-group-id="8143329597-3">]</span><span class="p" data-group-id="8143329597-1">)</span></code></pre><p>Speaking of <code class="inline">mutate</code>, it's 'group-aware'. As are <code class="inline">arrange</code>, <code class="inline">distinct</code>, and <code class="inline">n_rows</code>.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">arrange</span><span class="p" data-group-id="6700527738-1">(</span><span class="n">grouped</span><span class="p">,</span><span class="w"> </span><span class="ss">desc</span><span class="p">:</span><span class="w"> </span><span class="ss">:total</span><span class="p" data-group-id="6700527738-1">)</span></code></pre><p>In case you need more complex operations, like calculations inside groups, you can use the
more flexible <a href="Explorer.DataFrame.html#summarise_with/2"><code class="inline">Explorer.DataFrame.summarise_with/2</code></a> function.</p><pre><code class="makeup elixir" translate="no"><span class="nc">DataFrame</span><span class="o">.</span><span class="n">summarise_with</span><span class="p" data-group-id="5412937477-1">(</span><span class="n">grouped</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="5412937477-2">fn</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">max</span><span class="p" data-group-id="5412937477-3">(</span><span class="n">df</span><span class="p" data-group-id="5412937477-4">[</span><span class="s">&quot;per_capita&quot;</span><span class="p" data-group-id="5412937477-4">]</span><span class="p" data-group-id="5412937477-3">)</span><span class="w">

  </span><span class="p" data-group-id="5412937477-5">[</span><span class="w">
    </span><span class="ss">per_capita_max</span><span class="p">:</span><span class="w"> </span><span class="n">max</span><span class="p">,</span><span class="w">
    </span><span class="ss">greater_than_9</span><span class="p">:</span><span class="w"> </span><span class="nc">Series</span><span class="o">.</span><span class="n">greater</span><span class="p" data-group-id="5412937477-6">(</span><span class="n">max</span><span class="p">,</span><span class="w"> </span><span class="mf">9.0</span><span class="p" data-group-id="5412937477-6">)</span><span class="w">
  </span><span class="p" data-group-id="5412937477-5">]</span><span class="w">
</span><span class="k" data-group-id="5412937477-2">end</span><span class="p" data-group-id="5412937477-1">)</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">DataFrame</span><span class="o">.</span><span class="n">arrange</span><span class="p" data-group-id="5412937477-7">(</span><span class="ss">desc</span><span class="p">:</span><span class="w"> </span><span class="ss">:per_capita_max</span><span class="p" data-group-id="5412937477-7">)</span></code></pre><h3 id="that-s-it" class="section-heading">
  <a href="#that-s-it" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">that-s-it</p>
  </a>
  That's it!
</h3>
<p>And not. This is certainly not exhaustive, but I hope it gives you a good idea of what can be done and what the 'flavour' of the API is like. I'd love contributions and issues raised where you find them!</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="api-reference.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
API Reference
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="changelog.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Changelog
        </span>
      </a>

  </div>
</div>
      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/explorer/0.4.0-dev" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/explorer/0.4.0-dev" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/explorer/0.4.0-dev/show/notebooks/exploring_explorer.livemd">(current file)</a>

            </span>

            <button class="a-main line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.29.0) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
